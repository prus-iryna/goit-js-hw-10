{"version":3,"file":"1-timer-CUahzmrw.js","sources":["../../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst startBtn = document.querySelector('[data-start]');\nconst dataTimePicker = document.querySelector('#datetime-picker');\n\nconst dataDays = document.querySelector('.value[data-days]');\nconst dataHours = document.querySelector('.value[data-hours]');\nconst dataMinuts = document.querySelector('.value[data-minutes]');\nconst dataSeconds = document.querySelector('.value[data-seconds]');\nlet selectedDate = null;\n\nclass Timer {\n  constructor({ onTick }) {\n    this.intervalId = null;\n    this.isActive = false;\n    this.onTick = onTick;\n  }\n  start(selectedDate) {\n    if (this.isActive) {\n      return;\n    }\n    this.isActive = true;\n\n    this.intervalId = setInterval(() => {\n      const currentDate = Date.now();\n      const timeLeft = selectedDate - currentDate;\n      if (timeLeft <= 0) {\n        this.stop();\n        this.onTick(this.convertMs(0));\n        return;\n      }\n      this.onTick(this.convertMs(timeLeft));\n    }, 1000);\n  }\n  stop() {\n    clearInterval(this.intervalId);\n    this.intervalId = null;\n    this.isActive = false;\n  }\n  convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    const days = this.pad(Math.floor(ms / day));\n    const hours = this.pad(Math.floor((ms % day) / hour));\n    const minutes = this.pad(Math.floor(((ms % day) % hour) / minute));\n    const seconds = this.pad(\n      Math.floor((((ms % day) % hour) % minute) / second)\n    );\n\n    return { days, hours, minutes, seconds };\n  }\n  pad(value) {\n    return String(value).padStart(2, '0');\n  }\n}\nconst timer = new Timer({\n  onTick: update,\n});\nfunction update({ days, hours, minutes, seconds }) {\n  dataDays.textContent = days;\n  dataHours.textContent = hours;\n  dataMinuts.textContent = minutes;\n  dataSeconds.textContent = seconds;\n}\nflatpickr(dataTimePicker, {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    selectedDate = selectedDates[0];\n    const currentDate = new Date();\n    if (selectedDate <= currentDate) {\n      iziToast.warning({\n        message: '\"Please choose a date in the future\"',\n        position: 'topCenter',\n      });\n      startBtn.disabled = true;\n    } else {\n      startBtn.disabled = false;\n    }\n  },\n});\nstartBtn.addEventListener('click', () => {\n  if (!selectedDate) return;\n  timer.start(selectedDate);\n  startBtn.disabled = true;\n});\n"],"names":["startBtn","dataTimePicker","dataDays","dataHours","dataMinuts","dataSeconds","selectedDate","Timer","onTick","currentDate","timeLeft","ms","days","hours","minutes","seconds","value","timer","update","flatpickr","selectedDates","iziToast"],"mappings":"gDAKA,MAAMA,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAiB,SAAS,cAAc,kBAAkB,EAE1DC,EAAW,SAAS,cAAc,mBAAmB,EACrDC,EAAY,SAAS,cAAc,oBAAoB,EACvDC,EAAa,SAAS,cAAc,sBAAsB,EAC1DC,EAAc,SAAS,cAAc,sBAAsB,EACjE,IAAIC,EAAe,KAEnB,MAAMC,CAAM,CACV,YAAY,CAAE,OAAAC,GAAU,CACtB,KAAK,WAAa,KAClB,KAAK,SAAW,GAChB,KAAK,OAASA,CACf,CACD,MAAMF,EAAc,CACd,KAAK,WAGT,KAAK,SAAW,GAEhB,KAAK,WAAa,YAAY,IAAM,CAClC,MAAMG,EAAc,KAAK,MACnBC,EAAWJ,EAAeG,EAChC,GAAIC,GAAY,EAAG,CACjB,KAAK,KAAI,EACT,KAAK,OAAO,KAAK,UAAU,CAAC,CAAC,EAC7B,MACD,CACD,KAAK,OAAO,KAAK,UAAUA,CAAQ,CAAC,CACrC,EAAE,GAAI,EACR,CACD,MAAO,CACL,cAAc,KAAK,UAAU,EAC7B,KAAK,WAAa,KAClB,KAAK,SAAW,EACjB,CACD,UAAUC,EAAI,CAMZ,MAAMC,EAAO,KAAK,IAAI,KAAK,MAAMD,EAAK,KAAG,CAAC,EACpCE,EAAQ,KAAK,IAAI,KAAK,MAAOF,EAAK,MAAO,IAAI,CAAC,EAC9CG,EAAU,KAAK,IAAI,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,CAAC,EAC3DI,EAAU,KAAK,IACnB,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,CACxD,EAEI,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CACD,IAAIC,EAAO,CACT,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACrC,CACH,CACA,MAAMC,EAAQ,IAAIV,EAAM,CACtB,OAAQW,CACV,CAAC,EACD,SAASA,EAAO,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACjDb,EAAS,YAAcU,EACvBT,EAAU,YAAcU,EACxBT,EAAW,YAAcU,EACzBT,EAAY,YAAcU,CAC5B,CACAI,EAAUlB,EAAgB,CACxB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQmB,EAAe,CACrBd,EAAec,EAAc,CAAC,EAE1Bd,GADgB,IAAI,MAEtBe,EAAS,QAAQ,CACf,QAAS,uCACT,SAAU,WAClB,CAAO,EACDrB,EAAS,SAAW,IAEpBA,EAAS,SAAW,EAEvB,CACH,CAAC,EACDA,EAAS,iBAAiB,QAAS,IAAM,CAClCM,IACLW,EAAM,MAAMX,CAAY,EACxBN,EAAS,SAAW,GACtB,CAAC"}